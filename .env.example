# ============================================================================
# n8n Enterprise Setup Configuration
# ============================================================================
# Copy this file to .env and update the values for your environment.

# ============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================================================
POSTGRES_DB=n8n
POSTGRES_USER=n8n
POSTGRES_PASSWORD=change-this-password
DB_POSTGRESDB_POOL_SIZE=50  # Increased for worker mode

# ============================================================================
# REDIS CONFIGURATION (Cache & Queue)
# ============================================================================
REDIS_PASSWORD=change-this-redis-password

# ============================================================================
# n8n CORE CONFIGURATION
# ============================================================================
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=http
# For local dev without proxy, use http://localhost:5678
# For NPM setup, use likely https://n8n.your-domain.com
WEBHOOK_URL=http://localhost:5678/ 
N8N_EDITOR_BASE_URL=http://localhost:5678

TIMEZONE=Asia/Kolkata # Recommended to set your local timezone
GENERIC_TIMEZONE=Asia/Kolkata

# ============================================================================
# n8n AUTHENTICATION & SECURITY
# ============================================================================
N8N_BASIC_AUTH_ACTIVE=true
N8N_BASIC_AUTH_USER=admin
N8N_BASIC_AUTH_PASSWORD=your-secure-password

# CRITICAL: Generate a unique 32-character encryption key
# Generate with: openssl rand -base64 32
N8N_ENCRYPTION_KEY=REPLACE-WITH-32-CHAR-ENCRYPTION-KEY

N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS=true
N8N_SECURE_COOKIE=false # Set to true if using HTTPS

# ============================================================================
# WORKER & QUEUE CONFIGURATION (Multi-threading)
# ============================================================================
EXECUTIONS_MODE=queue
N8N_WORKERS_ENABLED=true
N8N_WORKER_CONCURRENCY=20 # Adjust based on CPU/RAM
OFFLOAD_MANUAL_EXECUTIONS_TO_WORKERS=true
QUEUE_BULL_REDIS_DB=0
QUEUE_HEALTH_CHECK_ACTIVE=true

# ============================================================================
# LOGGING & PRUNING (Optimization)
# ============================================================================
N8N_LOG_LEVEL=info # options: debug, info, warn, error
EXECUTIONS_DATA_PRUNE=true
EXECUTIONS_DATA_MAX_AGE=168 # 7 days in hours
EXECUTIONS_DATA_PRUNE_MAX_COUNT=50000

# ============================================================================
# EXTERNAL INTEGRATIONS (SMTP, etc.) - Optional
# ============================================================================
# N8N_EMAIL_MODE=smtp
# N8N_SMTP_HOST=smtp.gmail.com
# N8N_SMTP_PORT=587
# N8N_SMTP_USER=user@gmail.com
# N8N_SMTP_PASS=app-password
# N8N_SMTP_SENDER=user@gmail.com
# N8N_SMTP_SSL=false
# N8N_SMTP_STARTTLS=true